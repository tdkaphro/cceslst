<div class="traitements-container">
    <div class="custom-card">
        <mat-card *ngIf="userInfo" class="praticien-card custom-card">
            <p class="username">{{userInfo.nom}} {{userInfo.prenom}}</p>
            <div class="praticien-content">
                <div class="praticien-row">
                    <div><span class="praticien-title">Cabinet:</span><span>{{userInfo.cabinet}}</span></div>
                    <div><span class="praticien-title">Spécialité:</span><span>{{userInfo.type}}</span></div>
                </div>
                <div class="praticien-row">
                    <div><span class="praticien-title">Nom d'utilisateur:</span><span>{{userInfo.login}}</span></div>
                    <div><span class="praticien-title">Email:</span><span>{{userInfo.email}}</span></div>
                </div>
                <div class="praticien-row">
                    <div><span class="praticien-title">Matricule
                            fiscale:</span><span>{{userInfo.matriculeFiscal}}</span>
                    </div>
                    <div><span class="praticien-title">Adress:</span><span>{{userInfo.adresse}}</span></div>
                </div>
                <div class="praticien-row">
                    <div><span class="praticien-title">Ville:</span><span>{{userInfo.ville}}</span></div>
                    <div><span class="praticien-title">Code postale:</span><span>{{userInfo.codePostal}}</span></div>
                </div>
                <div class="praticien-row">
                    <div><span class="praticien-title">Téléphone fixe:</span><span>{{userInfo.telFixe}}</span></div>
                    <div><span class="praticien-title">Téléphone portable:</span><span>{{userInfo.telPortable}}</span>
                    </div>
                </div>
                <!--<div class="button-section">
                <button mat-raised-button color="primary" class="btn-delete" (click)="askToArchiveUser()">Archiver</button>
                <button mat-raised-button color="primary" class="btn-activate" (click)="askToActivateUser()">Activer</button>
            </div>-->
            </div>
        </mat-card>
    </div>
    <!--<mat-card>Simple card</mat-card>-->
    <div class="custom-card">
        <mat-card class="mat-elevation-z3">
            <p class="mat-card-title">Traitements</p>
            <div class="corporate-design-panel" *ngIf="listTraitements.length>0;else noItems">
                <div class="corporate-design-panel-body">
                    <div>
                        <div class="search-section">
                            <mat-form-field class="search-mat-form-field">
                                <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Recherche">
                                <mat-icon matSuffix>search</mat-icon>
                            </mat-form-field>
                        </div>
                        <table mat-table [dataSource]="dataSource" class="mat-elevation-z1">
                            <!-- Name Column -->
                            <ng-container matColumnDef="nomPatient">
                                <th mat-header-cell *matHeaderCellDef> Patient </th>
                                <td mat-cell *matCellDef="let row">
                                    {{row.nomPatient}} {{row.prenomPatient}}
                                </td>
                            </ng-container>

                            <!-- Name Column -->
                            <ng-container matColumnDef="typeTraitement">
                                <th mat-header-cell *matHeaderCellDef> Traitement </th>
                                <td mat-cell *matCellDef="let row">
                                    {{getTypeTraitement(row.typeTraitement)}}
                                </td>
                            </ng-container>

                            <!-- Name Column -->
                            <ng-container matColumnDef="dateCreation">
                                <th mat-header-cell *matHeaderCellDef> Date de création </th>
                                <td mat-cell *matCellDef="let row">
                                    {{row.dateCreation | date}}
                                </td>
                            </ng-container>

                            <!-- PIN Column -->
                            <ng-container matColumnDef="etape">
                                <th mat-header-cell *matHeaderCellDef> Statut </th>
                                <td mat-cell *matCellDef="let row">
                                    <span [style.background-color]="row.etape?.color" class="span-status">{{row.etape?.libEtape}}</span>
                                </td>
                            </ng-container>

                            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumns;"
                                routerLink="/admin/main/traitement/{{row.idTraitement}}"
                                style="cursor: pointer;">
                            </tr>
                        </table>

                        <mat-paginator [pageSizeOptions]="[10, 25, 100]"></mat-paginator>
                    </div>
                </div>
            </div>
            <ng-template #noItems>
                <div class="no-items">
                    Pas de traitements à afficher
                </div>
            </ng-template>
        </mat-card>
    </div>
</div>